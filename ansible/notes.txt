
# ansible-galaxy role init common

# vi common/tasks/main.yml 

###############
---

- include_tasks: redhat.yml
  when: ansible_os_family == "RedHat"
  tags:
    - rhel-common

- include_tasks: debian.yml
  when: ansible_os_family == "Debian"
  tags:
    - debian-common


# vi site.yml 

--- 

- hosts: all
  gather_facts: True
  roles:
    - common

- import_playbook: vmware.yml


#####
---

- hosts: all
  gather_facts: True
  tasks:
    - name: "check pkgs installed" 
      package_facts: 
        manager: auto

    - name: Print the package facts
      debug:
        var: ansible_facts.packages
    
    - name: "check if oracle jdk installed" 
      debug:
        msg: "jdk installed" 
      when: "'java' in ansible_facts.packages" 
  
  
